{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stalic/Desktop/Pexels-API-React/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stalic/Desktop/Pexels-API-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stalic/Desktop/Pexels-API-React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-template-curly-in-string */import React,{useState,useEffect}from\"react\";import Search from\"../components/Search\";import Picture from\"../components/Picture\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentSearch=_useState8[0],setCurrentSearch=_useState8[1];var apiKey=\"\";var initialURL=\"https://api.pexels.com/v1/curated?page=1&per_page=15\";var searchURL=\"https://api.pexels.com/v1/search?query=\".concat(input,\"&page=1&per_page=15\");var _search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url,{headers:{Authorization:apiKey}});case 2:result=_context.sent;// console.log(result);\nsetData(result.data.photos);setCurrentSearch(input);case 5:case\"end\":return _context.stop();}},_callee);}));return function search(_x){return _ref.apply(this,arguments);};}();var morePicture=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newURL,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setPage(page+1);if(currentSearch===\"\"){newURL=\"https://api.pexels.com/v1/curated?page=\".concat(page+1,\"&per_page=15\");}else{newURL=\"https://api.pexels.com/v1/search?query=\".concat(currentSearch,\"&page=\").concat(page+1,\"&per_page=15\");}_context2.next=4;return axios.get(newURL,{headers:{Authorization:apiKey}});case 4:result=_context2.sent;setData(data.concat(result.data.photos));case 6:case\"end\":return _context2.stop();}},_callee2);}));return function morePicture(){return _ref2.apply(this,arguments);};}();useEffect(function(){_search(initialURL);},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(Search,{search:function search(){_search(searchURL);},setInput:setInput}),/*#__PURE__*/_jsx(\"div\",{className:\"pictures\",children:data&&data.map(function(d,index){return/*#__PURE__*/_jsx(Picture,{data:d},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"morePicture\",children:/*#__PURE__*/_jsx(\"button\",{onClick:morePicture,children:\"\\u66F4\\u591A\\u5716\\u7247\"})})]});};export default Homepage;","map":{"version":3,"names":["React","useState","useEffect","Search","Picture","axios","Homepage","input","setInput","data","setData","page","setPage","currentSearch","setCurrentSearch","apiKey","initialURL","searchURL","search","url","get","headers","Authorization","result","photos","morePicture","newURL","concat","minHeight","map","d","index"],"sources":["/Users/stalic/Desktop/Pexels-API-React/src/pages/Homepage.jsx"],"sourcesContent":["/* eslint-disable no-template-curly-in-string */\nimport React, { useState, useEffect } from \"react\";\nimport Search from \"../components/Search\";\nimport Picture from \"../components/Picture\";\nimport axios from \"axios\";\n\nconst Homepage = () => {\n  const [input, setInput] = useState(\"\");\n  const [data, setData] = useState(null);\n  const [page, setPage] = useState(1);\n  const [currentSearch, setCurrentSearch] = useState(\"\");\n\n  const apiKey = \"\";\n  const initialURL = \"https://api.pexels.com/v1/curated?page=1&per_page=15\";\n  const searchURL = `https://api.pexels.com/v1/search?query=${input}&page=1&per_page=15`;\n\n  const search = async (url) => {\n    let result = await axios.get(url, {\n      headers: { Authorization: apiKey },\n    });\n    // console.log(result);\n    setData(result.data.photos);\n    setCurrentSearch(input);\n  };\n\n  const morePicture = async () => {\n    let newURL;\n    setPage(page + 1);\n    if (currentSearch === \"\") {\n      newURL = `https://api.pexels.com/v1/curated?page=${page + 1}&per_page=15`;\n    } else {\n      newURL = `https://api.pexels.com/v1/search?query=${currentSearch}&page=${\n        page + 1\n      }&per_page=15`;\n    }\n\n    let result = await axios.get(newURL, {\n      headers: { Authorization: apiKey },\n    });\n    setData(data.concat(result.data.photos));\n  };\n\n  useEffect(() => {\n    search(initialURL);\n  }, []);\n\n  return (\n    <div style={{ minHeight: \"100vh\" }}>\n      <Search\n        search={() => {\n          search(searchURL);\n        }}\n        setInput={setInput}\n      />\n      <div className=\"pictures\">\n        {data &&\n          data.map((d, index) => {\n            return <Picture data={d} key={index} />;\n          })}\n      </div>\n      <div className=\"morePicture\">\n        <button onClick={morePicture}>更多圖片</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Homepage;\n"],"mappings":"oYAAA,gDACA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,QAAO,KAAM,uBAAuB,CAC3C,MAAOC,MAAK,KAAM,OAAO,CAAC,wFAE1B,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,cAA0BL,QAAQ,CAAC,EAAE,CAAC,wCAA/BM,KAAK,eAAEC,QAAQ,eACtB,eAAwBP,QAAQ,CAAC,IAAI,CAAC,yCAA/BQ,IAAI,eAAEC,OAAO,eACpB,eAAwBT,QAAQ,CAAC,CAAC,CAAC,yCAA5BU,IAAI,eAAEC,OAAO,eACpB,eAA0CX,QAAQ,CAAC,EAAE,CAAC,yCAA/CY,aAAa,eAAEC,gBAAgB,eAEtC,GAAMC,OAAM,CAAG,EAAE,CACjB,GAAMC,WAAU,CAAG,sDAAsD,CACzE,GAAMC,UAAS,kDAA6CV,KAAK,uBAAqB,CAEtF,GAAMW,QAAM,4FAAG,iBAAOC,GAAG,oJACJd,MAAK,CAACe,GAAG,CAACD,GAAG,CAAE,CAChCE,OAAO,CAAE,CAAEC,aAAa,CAAEP,MAAO,CACnC,CAAC,CAAC,QAFEQ,MAAM,eAGV;AACAb,OAAO,CAACa,MAAM,CAACd,IAAI,CAACe,MAAM,CAAC,CAC3BV,gBAAgB,CAACP,KAAK,CAAC,CAAC,qDACzB,kBAPKW,OAAM,4CAOX,CAED,GAAMO,YAAW,6FAAG,2JAElBb,OAAO,CAACD,IAAI,CAAG,CAAC,CAAC,CACjB,GAAIE,aAAa,GAAK,EAAE,CAAE,CACxBa,MAAM,kDAA6Cf,IAAI,CAAG,CAAC,gBAAc,CAC3E,CAAC,IAAM,CACLe,MAAM,kDAA6Cb,aAAa,kBAC9DF,IAAI,CAAG,CAAC,gBACI,CAChB,CAAC,uBAEkBN,MAAK,CAACe,GAAG,CAACM,MAAM,CAAE,CACnCL,OAAO,CAAE,CAAEC,aAAa,CAAEP,MAAO,CACnC,CAAC,CAAC,QAFEQ,MAAM,gBAGVb,OAAO,CAACD,IAAI,CAACkB,MAAM,CAACJ,MAAM,CAACd,IAAI,CAACe,MAAM,CAAC,CAAC,CAAC,uDAC1C,kBAfKC,YAAW,2CAehB,CAEDvB,SAAS,CAAC,UAAM,CACdgB,OAAM,CAACF,UAAU,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,KAAK,CAAE,CAAEY,SAAS,CAAE,OAAQ,CAAE,wBACjC,KAAC,MAAM,EACL,MAAM,CAAE,iBAAM,CACZV,OAAM,CAACD,SAAS,CAAC,CACnB,CAAE,CACF,QAAQ,CAAET,QAAS,EACnB,cACF,YAAK,SAAS,CAAC,UAAU,UACtBC,IAAI,EACHA,IAAI,CAACoB,GAAG,CAAC,SAACC,CAAC,CAAEC,KAAK,CAAK,CACrB,mBAAO,KAAC,OAAO,EAAC,IAAI,CAAED,CAAE,EAAMC,KAAK,CAAI,CACzC,CAAC,CAAC,EACA,cACN,YAAK,SAAS,CAAC,aAAa,uBAC1B,eAAQ,OAAO,CAAEN,WAAY,UAAC,0BAAI,EAAS,EACvC,GACF,CAEV,CAAC,CAED,cAAenB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}